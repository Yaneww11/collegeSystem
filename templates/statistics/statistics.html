{% extends 'base.html' %}
{% load static %}

{% block title %}Statistics{% endblock title %}

{% block content %}
    <main class="stats-container">
        <!-- Grades by Course -->
        <section class="stats-section">
            <h2>Grade Distribution by Course</h2>
            <table class="stat-table">
                <thead>
                <tr>
                    <th>Course</th>
                    <th>Avg. Grade</th>
                    <th>Highest Grade</th>
                    <th>Lowest Grade</th>
                    <th>Passed Students</th>
                    <th>Failed Students</th>
                </tr>
                </thead>
                <tbody>
                {% for course_stats in grade_distribution_by_course %}
                    {% for course_name, stats in course_stats.items %}
                        <tr>
                            <td>{{ course_name }}</td>
                            <td>{{ stats.avg_grade }}</td>
                            <td>{{ stats.highest_grade }}</td>
                            <td>{{ stats.lowest_grade }}</td>
                            <td>{{ stats.passed_students }}</td>
                            <td>{{ stats.failed_students }}</td>
                        </tr>
                    {% endfor %}
                {% endfor %}
                </tbody>
            </table>
        </section>

        <!-- Grades by Teacher -->
        <section class="stats-section">
            <h2>Grade Distribution by Teacher</h2>
            <table class="stat-table">
                <thead>
                <tr>
                    <th>Teacher</th>
                    <th>Avg. Grade</th>
                    <th>Courses Taught</th>
                    <th>Total Students</th>
                </tr>
                </thead>
                <tbody>
                {% for teacher_stats in grade_distribution_by_teacher %}
                    {% for teacher_name, stats in teacher_stats.items %}
                        <tr>
                            <td>{{ teacher_name }}</td>
                            <td>{{ stats.avg_grade }}</td>
                            <td>{{ stats.courses_taught }}</td>
                            <td>{{ stats.all_students }}</td>
                        </tr>
                    {% endfor %}
                {% endfor %}
                </tbody>
            </table>
        </section>

        <!-- Attendance Summary -->
{#        <section class="stats-section">#}
{#            <h2>Attendance Summary</h2>#}
{#            <table class="stat-table">#}
{#                <thead>#}
{#                <tr>#}
{#                    <th>Course</th>#}
{#                    <th>Total Sessions</th>#}
{#                    <th>Average Attendance</th>#}
{#                    <th>Absentees (%)</th>#}
{#                </tr>#}
{#                </thead>#}
{#                <tbody>#}
{#                <tr>#}
{#                    <td>Web Development</td>#}
{#                    <td>16</td>#}
{#                    <td>92%</td>#}
{#                    <td>8%</td>#}
{#                </tr>#}
{#                <tr>#}
{#                    <td>Operating Systems</td>#}
{#                    <td>14</td>#}
{#                    <td>85%</td>#}
{#                    <td>15%</td>#}
{#                </tr>#}
{#                </tbody>#}
{#            </table>#}
{#        </section>#}

        <!-- Summary by Department -->
        <section class="stats-section">
            <h2>Summary by Department</h2>
            <table class="stat-table">
                <thead>
                <tr>
                    <th>Department</th>
                    <th>Programs</th>
                    <th>Courses</th>
                    <th>Teachers</th>
                    <th>Students</th>
                    <th>Avg. Grade</th>
                </tr>
                </thead>
                <tbody>
                {% for dep in departments_summary %}
                    <tr>
                        <td>{{ dep.department }}</td>
                        <td>{{ dep.programs_count }}</td>
                        <td>{{ dep.courses_count }}</td>
                        <td>{{ dep.teachers_count }}</td>
                        <td>{{ dep.students_count }}</td>
                        <td>{{ dep.avg_grade }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </section>
    </main>
{% endblock content %}